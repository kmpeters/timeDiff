## Background

VxWorks 6.9.4.1 VMEs have trouble saving data from multi-dimensional EPICS scans to nfs3 exports from NetApps appliances.  Good periods with no saveData problems alternate with bad periods during which every attempt to save data is abandoned.

## Usage

The analyze script expects to find a text file that is generated by the following command:
```
$ camonitor xxx:scan{2,3}.CPT xxx:saveData_totalRetries | tee logfile.txt
```

## Debugging

The Wind River workbench and a custom BSP with debug symbols for OS libraries was used.  The line in the EPICS code that was failing was the call to fseek() in writeXDR_setpos() in writeXDR.c.  The fseek call was failing with the following error, which was printed by a slightly modified version of writeXDR.c:
```
writeXDR_setpos: fseek failed, status = -1, errno=3080197, ('S_rpcLib_RPC_TIMEDOUT')
``` 

Debugging showed the following: fseek eventually led to nfs3Seek() being called, which did an nfsCacheLineFlush(), which called nfsClientCall(), which eventually ends up at semBTake(), which hangs on a call to KERNEL_UNLOCK().

Network captures show fragmented IP protocol packets and RPC retransmissions of NFS packets.

## Workarounds

The problem doesn't occur on Linux when nfs3-mounting the same shares from the NetApps appliance.

Setting nfs3CacheOptions=1 on VxWorks helped (no failures to save data in 23 hours).  More testing is needed.

Increasing the size of the nfsCache on VxWorks helped, but didn't eliminate the problem.

Increasing the UDP rate limit as well as disabling it, didn't eliminate the problem (or appear to help very much).

